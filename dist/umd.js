!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("vue")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","vue"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).vuseRx={},n.rxjs,n.rxjs.operators,n.Vue)}(this,(function(n,t,r,e){"use strict";function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var u=function(n){return new t.Observable((function(t){e.getCurrentInstance()&&n((function(){return t.next()}))}))},i=function(n){return r.takeUntil(u(n))},c=i(e.onUnmounted);var f=function(n,t,r){return"object"===o(t[r])&&null!==t&&"object"===o(n[r])},a=function n(t){return function(r){for(var e in r)t[e]=f(t,r,e)?n(t[e])(r[e]):r[e];return t}},s={mutationStrategy:a},p=function(n){return Object.assign({},n,{subscribe:function(){var t;return Object.assign({},n,{subscription:(t=n.state$).subscribe.apply(t,arguments)})}})},l=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return"function"==typeof n?n.apply(void 0,r):n},b=function(n){return function(t){return r.catchError((function(r,e){throw n(r,e,t)}))}},v=b((function(n,t,r){return r(n,t)})),y=b((function(n,t,r){return r(n,t),n}));function m(n,t,r){var o=e.ref(null==r?t.to?t.to(n.value):n.value:r);for(var u in t)(o[u]=d(n,o,t,u,this)).bind();return o}m.with=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=Object.assign.apply(Object,[{}].concat(t)),o=m.bind(e);return o.with=m.with.bind(e),o};var d=function(n,t,r,o,u){return{bind:function(i){var c=Object.assign({ref:n,map:r[o],watch:u},i),f=c.ref,a=c.map,s=c.watch;t[o].stop(),t[o].stop="to"===o?e.watch(f,(function(n){return t.value=a(n)}),Object.assign({},u,s)):e.watch(t,(function(n){return f.value=a(n)}),Object.assign({},u,s))},stop:function(){}}};n.canMergeDeep=f,n.deepMergeKeys=a,n.fromHook=u,n.fromRef=function(n){return c(new t.Observable((function(t){return e.watch(n,(function(n){return t.next(n)}))})))},n.mapError=v,n.pipeUntil=i,n.refFrom=function(n,r){if("object"===o(n))try{var u=e.ref(r);return c(t.from(n)).subscribe({next:function(n){return u.value=n}}),u}catch(n){}return e.isProxy(n)?e.toRef(n,r):e.ref(n)},n.refsFrom=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.ref(r.next),u=e.ref(r.error),i=c(t.from(n));return{next:o,error:u,value$:i,subscription:i.subscribe({next:function(n){return o.value=n},error:function(n){return u.value=n}})}},n.setRef=function(n){return r.tap({next:function(t){return n.value=t}})},n.syncRef=m,n.tapError=y,n.untilUnmounted=c,n.useRxState=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,u=Object.assign({},s,o),i=u.mutationStrategy;return function(o,u){var f=e.reactive(l(n)),a={},s={},b=[],v=!1,y=void 0,m={error:function(n){y=n},complete:function(){v=!0}},d=function(n){var e=new t.Subject;a[n]=function(){for(var t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e.next(o[n].apply(o,r))},b.push(s["".concat(n,"$")]=r.mergeScan((function(n,o){return o=l(o,n,m),(t.isObservable(o)?o:t.of(o)).pipe(r.map(i(n,i)),r.tap({next:function(){return y?y=e.error(y):v&&e.complete()}}))}),f)(e))};for(var g in o)d(g);var h=t.merge.apply(void 0,b);return p({actions:a,state:e.readonly(f),state$:c(u?u(h,o,f,s,m).pipe(r.scan((function(n,t){return i(n,i)(t)}),f)):h),actions$:s})}},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=umd.js.map
