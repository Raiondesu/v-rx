!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("rxjs/operators"),require("vue")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","vue"],r):r((n="undefined"!=typeof globalThis?globalThis:n||self).vuseRx={},n.rxjs,n.rxjs.operators,n.Vue)}(this,(function(n,r,t,e){"use strict";function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var u=function(n){return new r.Observable((function(r){e.getCurrentInstance()&&n((function(){return r.next()}))}))},i=function(n){return t.takeUntil(u(n))},c=i(e.onUnmounted);var f=function(n,r,t){return"object"===o(r[t])&&null!==r&&"object"===o(n[t])},a=function n(r){return function(t){for(var e in t)r[e]=f(r,t,e)?n(r[e])(t[e]):t[e];return r}},s={mutationStrategy:a},p=function(n){return Object.assign({},n,{subscribe:function(){var r;return Object.assign({},n,{subscription:(r=n.state$).subscribe.apply(r,arguments)})}})},l=function(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return"function"==typeof n?n.apply(void 0,t):n},b=function(n){return function(r){return t.catchError((function(t,e){throw n(t,e,r)}))}},v=b((function(n,r,t){return t(n,r)})),y=b((function(n,r,t){return t(n,r),n}));function m(n,r,t){var o=e.ref(null==t?r.to?r.to(n.value):n.value:t);for(var u in r)o[u]={},d(n,o,r,u,this)();return o}m.with=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];var e=Object.assign.apply(Object,[{}].concat(r)),o=m.bind(e);return o.with=m.with.bind(e),o};var d=function(n,r,t,o,u){return r[o].bind=function(i){var c=Object.assign({ref:n,map:t[o],watch:u},i),f=c.ref,a=c.map,s=c.watch;r[o].stop&&r[o].stop(),r[o].stop="to"===o?e.watch(f,(function(n){return r.value=a(n)}),Object.assign({},u,s)):e.watch(r,(function(n){return f.value=a(n)}),Object.assign({},u,s))}};n.canMergeDeep=f,n.deepMergeKeys=a,n.fromHook=u,n.fromRef=function(n){return c(new r.Observable((function(r){return e.watch(n,(function(n){return r.next(n)}))})))},n.mapError=v,n.pipeUntil=i,n.refFrom=function(n,t){if("object"===o(n))try{var u=e.ref(t);return r.from(n).subscribe((function(n){return u.value=n})),u}catch(n){}return e.isProxy(n)?e.toRef(n,t):e.ref(n)},n.refsFrom=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.ref(t.next),u=e.ref(t.error),i=r.from(n);return{next:o,error:u,value$:i,subscription:i.subscribe({next:function(n){return o.value=n},error:function(n){return u.value=n}})}},n.setRef=function(n){return t.tap((function(r){return n.value=r}))},n.syncRef=m,n.tapError=y,n.untilUnmounted=c,n.useRxState=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,u=Object.assign({},s,o),i=u.mutationStrategy;return function(o,u){var f=e.reactive(l(n)),a={},s={},b=[],v=!1,y=void 0,m={error:function(n){y=n},complete:function(){v=!0}},d=function(n){var e=new r.Subject;a[n]=function(){for(var r=arguments.length,t=new Array(r),u=0;u<r;u++)t[u]=arguments[u];return e.next(o[n].apply(o,t))},b.push(s["".concat(n,"$")]=t.mergeScan((function(n,o){return o=l(o,n,m),(r.isObservable(o)?o:r.of(o)).pipe(t.map(i(n,i)),t.tap((function(){return y?y=e.error(y):v&&e.complete()})))}),f)(e))};for(var g in o)d(g);var h=r.merge.apply(void 0,b);return p({actions:a,state:e.readonly(f),state$:c(u?u(h,o,f,s,m).pipe(t.scan((function(n,r){return i(n,i)(r)}),f)):h),actions$:s})}},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=umd.js.map
