import{r as n,o as a,c as s,b as t,w as e,d as o}from"./app.14fdaa21.js";const p='{"title":"Stopwatch","description":"","frontmatter":{},"headers":[{"level":2,"title":"Step-by-step","slug":"step-by-step"},{"level":3,"title":"Basics","slug":"basics"},{"level":3,"title":"Reducers and counting logic","slug":"reducers-and-counting-logic"},{"level":3,"title":"Component","slug":"component"},{"level":2,"title":"Complete component","slug":"complete-component"},{"level":2,"title":"Marble diagram","slug":"marble-diagram"}],"relativePath":"recipies/stopwatch.md","lastUpdated":1613696473993}',c={},u=t("h1",{id:"stopwatch"},"Stopwatch",-1),l=t("p",null,[t("div",{class:"table-of-contents"},[t("ul",null,[t("li",null,[t("a",{href:"#stopwatch"},"Stopwatch"),t("ul",null,[t("li",null,[t("a",{href:"#step-by-step"},"Step-by-step")]),t("li",null,[t("a",{href:"#complete-component"},"Complete component")]),t("li",null,[t("a",{href:"#marble-diagram"},"Marble diagram")])])])])])],-1),k=t("p",null,"This is a simple stopwatch with configurable increment step, interval and maximum value limit.",-1),i=t("h2",{id:"step-by-step"},"Step-by-step",-1),r=t("h3",{id:"basics"},"Basics",-1),m=t("p",null,"First, let's define some basic reactive state for our stopwatch:",-1),g=t("div",{class:"language-js"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" useRxState "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'vuse-rx'"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token comment"},"// useRxState accepts an initial state for the system"),o("\n"),t("span",{class:"token keyword"},"const"),o(" rxState "),t("span",{class:"token operator"},"="),o(),t("span",{class:"token function"},"useRxState"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  "),t("span",{class:"token comment"},"// Determines if the stopwatch is counting"),o("\n  count"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),o("\n\n  "),t("span",{class:"token comment"},"// The smaller the speed,"),o("\n  "),t("span",{class:"token comment"},"// the bigger the interval between increments"),o("\n  speed"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},","),o("\n\n  "),t("span",{class:"token comment"},"// Actual stopwatch counter"),o("\n  value"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),o("\n\n  "),t("span",{class:"token comment"},"// Maximum counter value, NaN means unlimited"),o("\n  maxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"NaN"),t("span",{class:"token punctuation"},","),o("\n\n  "),t("span",{class:"token comment"},"// Step of the increment"),o("\n  step"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),o("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n")])])],-1),d=t("p",null,'And some "business-rules":',-1),b=t("div",{class:"language-js"},[t("pre",null,[t("code",null,[t("span",{class:"token comment"},"// A small utility to calculate the delay between increments"),o("\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"calcDelay"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token number"},"1000"),o(),t("span",{class:"token operator"},"/"),o(" state"),t("span",{class:"token punctuation"},"."),o("speed"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token comment"},"// Stopwatch is paused if it's not counting,"),o("\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"paused"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token operator"},"!"),o("state"),t("span",{class:"token punctuation"},"."),o("count "),t("span",{class:"token operator"},"||"),o(" state"),t("span",{class:"token punctuation"},"."),o("step "),t("span",{class:"token operator"},"==="),o(),t("span",{class:"token number"},"0"),o(),t("span",{class:"token operator"},"||"),o(),t("span",{class:"token punctuation"},"("),o("\n  "),t("span",{class:"token comment"},"// or if the value has reached the maximum limit"),o("\n  state"),t("span",{class:"token punctuation"},"."),o("step "),t("span",{class:"token operator"},">"),o(),t("span",{class:"token number"},"0"),o(),t("span",{class:"token operator"},"&&"),o(" state"),t("span",{class:"token punctuation"},"."),o("value "),t("span",{class:"token operator"},">="),o(" state"),t("span",{class:"token punctuation"},"."),o("maxValue\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token comment"},"// Value must be capped by the maxValue"),o("\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"clampValue"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[o("maxValue"),t("span",{class:"token punctuation"},","),o(" value")]),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  maxValue"),t("span",{class:"token punctuation"},","),o("\n  value"),t("span",{class:"token operator"},":"),o(" value "),t("span",{class:"token operator"},">"),o(" maxValue "),t("span",{class:"token operator"},"?"),o(" maxValue "),t("span",{class:"token operator"},":"),o(" value\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n")])])],-1),f=t("h3",{id:"reducers-and-counting-logic"},"Reducers and counting logic",-1),v=t("p",null,"The next step would be to define reducers for our state. These reducers contain atomic, pure state updates, that are necessary for our business-logic to work.",-1),h=t("p",null,"Each reducer must return either a part of the state, or an observable that emits a part of the state.",-1),x=t("div",{class:"language-js"},[t("pre",null,[t("code",null,[t("span",{class:"token comment"},"// It's handy to wrap everything into a neat vue hook"),o("\n"),t("span",{class:"token comment"},"// which encapsulates the whole functionality"),o("\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"useStopwatch"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"rxState"),t("span",{class:"token punctuation"},"("),o("\n  "),t("span",{class:"token comment"},"// Reducers"),o("\n  "),t("span",{class:"token punctuation"},"{"),o("\n    "),t("span",{class:"token comment"},"// Play/Pause functionality"),o("\n    "),t("span",{class:"token function-variable function"},"setCountState"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"play"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" count"),t("span",{class:"token operator"},":"),o(" play "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token function-variable function"},"setStep"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"step"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" step "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token comment"},"// Speed must be greater than zero"),o("\n    "),t("span",{class:"token function-variable function"},"setSpeed"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"speed"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" speed"),t("span",{class:"token operator"},":"),o(" Math"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"max"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),o(" speed"),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token comment"},"// Increment is done by steps, but the value cannot be incremented above the maximum"),o("\n    "),t("span",{class:"token function-variable function"},"increment"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"."),o("value "),t("span",{class:"token operator"},"+"),o(" state"),t("span",{class:"token punctuation"},"."),o("step"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token comment"},"// Setting the value is limited by the maxValue"),o("\n    "),t("span",{class:"token function-variable function"},"setValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"value"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},","),o(" value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token comment"},"// When setting the maxValue, we should also re-set the counter value,"),o("\n    "),t("span",{class:"token comment"},"// in case it's above the new maximum"),o("\n    "),t("span",{class:"token function-variable function"},"setMaxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"max"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("max"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"."),o("value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),o("\n\n  "),t("span",{class:"token comment"},"// Here we modify the resulting observable"),o("\n  "),t("span",{class:"token comment"},"// by applying some of the reducers from above"),o("\n  "),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[o("state$"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token punctuation"},"{"),o(" increment "),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(" state$"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"pipe"),t("span",{class:"token punctuation"},"("),o("\n    "),t("span",{class:"token function"},"switchMap"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o("\n      "),t("span",{class:"token function"},"paused"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),o("\n        "),t("span",{class:"token comment"},"// if stopwatch is paused, proceed with no changes"),o("\n        "),t("span",{class:"token operator"},"?"),o(),t("span",{class:"token keyword"},"of"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),o("\n        "),t("span",{class:"token comment"},"// otherwise - create a timer"),o("\n        "),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"timer"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token function"},"calcDelay"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"pipe"),t("span",{class:"token punctuation"},"("),o("\n            "),t("span",{class:"token function"},"mapTo"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n            "),t("span",{class:"token comment"},"// that increments the state on each tick"),o("\n            "),t("span",{class:"token function"},"map"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"increment"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n          "),t("span",{class:"token punctuation"},")"),o("\n    "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n  "),t("span",{class:"token punctuation"},")"),o("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n")])])],-1),y=t("h3",{id:"component"},"Component",-1),w=t("p",null,"Now that we have defined the inner workings of the stopwatch, let's define how it's displayed to the user.",-1),R=t("h4",{id:"setup-function"},[t("code",null,"setup"),o(" function")],-1),S=t("div",{class:"language-vue"},[t("div",{class:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",null,[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("script")]),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"},[t("span",{class:"token language-javascript"},[o("\n"),t("span",{class:"token comment"},"// paste the code from earlier steps here"),o("\n\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" defineComponent"),t("span",{class:"token punctuation"},","),o(" ref "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'vue'"),t("span",{class:"token punctuation"},";"),o("\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" syncRef "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'vuse-rx'"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"export"),o(),t("span",{class:"token keyword"},"default"),o(),t("span",{class:"token function"},"defineComponent"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  "),t("span",{class:"token function"},"setup"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token punctuation"},"{"),o("\n    "),t("span",{class:"token comment"},"// Retrieve reducers and a fully reactive state"),o("\n    "),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token punctuation"},"["),o("handlers"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"]"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token function"},"useStopwatch"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o("\n      "),t("span",{class:"token comment"},"// a shorthand to subscribe to our newly created observalble, neat!"),o("\n      "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"subscribe"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(" console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'state updated: '"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n    "),t("span",{class:"token keyword"},"return"),o(),t("span",{class:"token punctuation"},"{"),o("\n      "),t("span",{class:"token operator"},"..."),o("handlers"),t("span",{class:"token punctuation"},","),o("\n      state"),t("span",{class:"token punctuation"},","),o("\n      stepRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("step"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n      setToRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n      maxRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n      "),t("span",{class:"token comment"},"// update speedRef whenever the state.speed property changes"),o("\n      speedRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"syncRef"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token string"},"'speed'"),t("span",{class:"token punctuation"},","),o(" String"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n      "),t("span",{class:"token comment"},"// override one of the handlers to interpret empty string as NaN instead of 0"),o("\n      "),t("span",{class:"token function-variable function"},"setMaxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"maxRef"),o(),t("span",{class:"token operator"},"=>"),o(" handlers"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setMaxValue"),t("span",{class:"token punctuation"},"("),o("maxRef "),t("span",{class:"token operator"},"==="),o(),t("span",{class:"token string"},"''"),o(),t("span",{class:"token operator"},"?"),o(),t("span",{class:"token number"},"NaN"),o(),t("span",{class:"token operator"},":"),o(),t("span",{class:"token operator"},"+"),o("maxRef"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),o("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),o("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n")])]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("script")]),t("span",{class:"token punctuation"},">")]),o("\n")])])],-1),V=t("h4",{id:"template"},[t("code",null,"template")],-1),q=t("div",{class:"language-vue"},[t("pre",null,[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("template")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Just a neat way to display the reactive state --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("p")]),o(),t("span",{class:"token attr-name"},"v-for"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("(value, key) in state"),t("span",{class:"token punctuation"},'"')]),o(),t("span",{class:"token attr-name"},":key"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("key"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("{{key}}: {{value}}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("p")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Toggle counting state --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setCountState(!state.count)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("{{ state.count ? 'Pause' : 'Start' }}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n\n    "),t("span",{class:"token comment"},"\x3c!-- Reset the counter value to 0 --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setValue(0)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Reset"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Toggle counting direction --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setStep(-state.step)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Count {{ state.step > 0 ? 'down' : 'up' }}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setToRef"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Convert ref's value to string and set it as the counter's value --\x3e"),o("\n    "),t("span",{class:"token comment"},"\x3c!-- using the reducer that was defined earlier --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setValue(+setToRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set value"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Convert speedRef value to string and set it as the counter's speed --\x3e"),o("\n    "),t("span",{class:"token comment"},"\x3c!-- using the reducer that was defined earlier --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("speedRef"),t("span",{class:"token punctuation"},'"')]),o(),t("span",{class:"token attr-name"},"@blur.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n\n    "),t("span",{class:"token comment"},"\x3c!-- Shorthand buttons to increment or decrement speed --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef - 1)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("-"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef + 1)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("+"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- We don't need to assign the new speed to the ref --\x3e"),o("\n    "),t("span",{class:"token comment"},"\x3c!-- because out speedRef is automatically synced to the reactive state.speed property! --\x3e"),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("stepRef"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setStep(+stepRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set step"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token comment"},"\x3c!-- Same thing as earlier, but for maxRef, --\x3e"),o("\n    "),t("span",{class:"token comment"},"\x3c!-- with some workarounds to treat empty string as NaN --\x3e"),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("maxRef"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@keyup.enter"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setMaxValue(maxRef)"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@focus.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("isNaN(maxRef) && (maxRef = "),t("span",{class:"token punctuation"},"'"),t("span",{class:"token punctuation"},"'"),o(")"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@blur.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("maxRef = maxRef === "),t("span",{class:"token punctuation"},"'"),t("span",{class:"token punctuation"},"'"),o(" || isNaN(maxRef) ? "),t("span",{class:"token punctuation"},"'"),o("NaN"),t("span",{class:"token punctuation"},"'"),o(" : maxRef"),t("span",{class:"token punctuation"},'"')]),o("\n    "),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setMaxValue(maxRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set maximum"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("template")]),t("span",{class:"token punctuation"},">")]),o("\n")])])],-1),N=t("h2",{id:"complete-component"},"Complete component",-1),C=t("p",null,"Combining all the steps together, this is the complete stopwatch component:",-1),M=t("div",{class:"language-vue"},[t("div",{class:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("div",{class:"highlighted"}," "),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",null,[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("script")]),o(),t("span",{class:"token attr-name"},"lang"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("ts"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"},[t("span",{class:"token language-javascript"},[o("\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" defineComponent"),t("span",{class:"token punctuation"},","),o(" ref "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'vue'"),t("span",{class:"token punctuation"},";"),o("\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" map"),t("span",{class:"token punctuation"},","),o(" mapTo"),t("span",{class:"token punctuation"},","),o(" switchMap"),t("span",{class:"token punctuation"},","),o(" takeWhile "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'rxjs/operators'"),t("span",{class:"token punctuation"},";"),o("\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(),t("span",{class:"token keyword"},"of"),t("span",{class:"token punctuation"},","),o(" timer "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'rxjs'"),t("span",{class:"token punctuation"},";"),o("\n"),t("span",{class:"token keyword"},"import"),o(),t("span",{class:"token punctuation"},"{"),o(" useRxState"),t("span",{class:"token punctuation"},","),o(" syncRef "),t("span",{class:"token punctuation"},"}"),o(),t("span",{class:"token keyword"},"from"),o(),t("span",{class:"token string"},"'vuse-rx'"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"const"),o(" rxState "),t("span",{class:"token operator"},"="),o(),t("span",{class:"token function"},"useRxState"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  count"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},","),o("\n  speed"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},","),o("\n  value"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),o("\n  maxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"NaN"),t("span",{class:"token punctuation"},","),o("\n  step"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),o("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"calcDelay"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token number"},"1000"),o(),t("span",{class:"token operator"},"/"),o(" state"),t("span",{class:"token punctuation"},"."),o("speed"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"paused"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token operator"},"!"),o("state"),t("span",{class:"token punctuation"},"."),o("count "),t("span",{class:"token operator"},"||"),o(" state"),t("span",{class:"token punctuation"},"."),o("step "),t("span",{class:"token operator"},"==="),o(),t("span",{class:"token number"},"0"),o(),t("span",{class:"token operator"},"||"),o(),t("span",{class:"token punctuation"},"("),o("\n  state"),t("span",{class:"token punctuation"},"."),o("step "),t("span",{class:"token operator"},">"),o(),t("span",{class:"token number"},"0"),o(),t("span",{class:"token operator"},"&&"),o(" state"),t("span",{class:"token punctuation"},"."),o("value "),t("span",{class:"token operator"},">="),o(" state"),t("span",{class:"token punctuation"},"."),o("maxValue\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"clampValue"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[o("maxValue"),t("span",{class:"token punctuation"},","),o(" value")]),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  maxValue"),t("span",{class:"token punctuation"},","),o("\n  value"),t("span",{class:"token operator"},":"),o(" value "),t("span",{class:"token operator"},">"),o(" maxValue "),t("span",{class:"token operator"},"?"),o(" maxValue "),t("span",{class:"token operator"},":"),o(" value\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token function-variable function"},"useStopwatch"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"rxState"),t("span",{class:"token punctuation"},"("),o("\n  "),t("span",{class:"token punctuation"},"{"),o("\n    "),t("span",{class:"token function-variable function"},"setCountState"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"play"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" count"),t("span",{class:"token operator"},":"),o(" play "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token function-variable function"},"setStep"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"step"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" step "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token function-variable function"},"setSpeed"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"speed"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o(" speed"),t("span",{class:"token operator"},":"),o(" Math"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"max"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),o(" speed"),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n    "),t("span",{class:"token function-variable function"},"increment"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"."),o("value "),t("span",{class:"token operator"},"+"),o(" state"),t("span",{class:"token punctuation"},"."),o("step"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token function-variable function"},"setValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"value"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},","),o(" value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token function-variable function"},"setMaxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"max"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token function"},"clampValue"),t("span",{class:"token punctuation"},"("),o("max"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"."),o("value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),o("\n  "),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[o("state$"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token punctuation"},"{"),o(" increment "),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token operator"},"=>"),o(" state$"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"pipe"),t("span",{class:"token punctuation"},"("),o("\n    "),t("span",{class:"token function"},"switchMap"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o("\n      "),t("span",{class:"token function"},"paused"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),o("\n        "),t("span",{class:"token operator"},"?"),o(),t("span",{class:"token keyword"},"of"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),o("\n        "),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"timer"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token function"},"calcDelay"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"pipe"),t("span",{class:"token punctuation"},"("),o("\n            "),t("span",{class:"token function"},"mapTo"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n            "),t("span",{class:"token function"},"takeWhile"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(),t("span",{class:"token operator"},"!"),t("span",{class:"token function"},"paused"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n            "),t("span",{class:"token function"},"map"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"increment"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n          "),t("span",{class:"token punctuation"},")"),o("\n    "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n  "),t("span",{class:"token punctuation"},")"),o("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n"),t("span",{class:"token keyword"},"export"),o(),t("span",{class:"token keyword"},"default"),o(),t("span",{class:"token function"},"defineComponent"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),o("\n  "),t("span",{class:"token function"},"setup"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o(),t("span",{class:"token punctuation"},"{"),o("\n    "),t("span",{class:"token keyword"},"const"),o(),t("span",{class:"token punctuation"},"["),o("handlers"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},"]"),o(),t("span",{class:"token operator"},"="),o(),t("span",{class:"token function"},"useStopwatch"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),o("\n      "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"subscribe"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"state"),o(),t("span",{class:"token operator"},"=>"),o(" console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'state updated: '"),t("span",{class:"token punctuation"},","),o(" state"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n\n    "),t("span",{class:"token keyword"},"return"),o(),t("span",{class:"token punctuation"},"{"),o("\n      "),t("span",{class:"token operator"},"..."),o("handlers"),t("span",{class:"token punctuation"},","),o("\n      state"),t("span",{class:"token punctuation"},","),o("\n      speedRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"syncRef"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},","),o(),t("span",{class:"token string"},"'speed'"),t("span",{class:"token punctuation"},","),o(" String"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n      stepRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("step"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n      setToRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n      maxRef"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token function"},"ref"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),o("state"),t("span",{class:"token punctuation"},"."),o("maxValue"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n\n      "),t("span",{class:"token function-variable function"},"setMaxValue"),t("span",{class:"token operator"},":"),o(),t("span",{class:"token parameter"},"maxRef"),o(),t("span",{class:"token operator"},"=>"),o(" handlers"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setMaxValue"),t("span",{class:"token punctuation"},"("),o("maxRef "),t("span",{class:"token operator"},"==="),o(),t("span",{class:"token string"},"''"),o(),t("span",{class:"token operator"},"?"),o(),t("span",{class:"token number"},"NaN"),o(),t("span",{class:"token operator"},":"),o(),t("span",{class:"token operator"},"+"),o("maxRef"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),o("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),o("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),o("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),o("\n")])]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("script")]),t("span",{class:"token punctuation"},">")]),o("\n\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("template")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("p")]),o(),t("span",{class:"token attr-name"},"v-for"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("(value, key) in state"),t("span",{class:"token punctuation"},'"')]),o(),t("span",{class:"token attr-name"},":key"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("key"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("{{key}}: {{value}}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("p")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setCountState(!state.count)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("{{ state.count ? 'Pause' : 'Start' }}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setValue(0)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Reset"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setStep(-state.step)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Count {{ state.step > 0 ? 'down' : 'up' }}"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setToRef"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setValue(+setToRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set value"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("speedRef"),t("span",{class:"token punctuation"},'"')]),o(),t("span",{class:"token attr-name"},"@blur.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef - 1)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("-"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setSpeed(+speedRef + 1)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("+"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("stepRef"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setStep(+stepRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set step"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("input")]),o(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("maxRef"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@keyup.enter"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setMaxValue(maxRef)"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@focus.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("isNaN(maxRef) && (maxRef = "),t("span",{class:"token punctuation"},"'"),t("span",{class:"token punctuation"},"'"),o(")"),t("span",{class:"token punctuation"},'"')]),o("\n      "),t("span",{class:"token attr-name"},"@blur.capture"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("maxRef = maxRef === "),t("span",{class:"token punctuation"},"'"),t("span",{class:"token punctuation"},"'"),o(" || isNaN(maxRef) ? "),t("span",{class:"token punctuation"},"'"),o("NaN"),t("span",{class:"token punctuation"},"'"),o(" : maxRef"),t("span",{class:"token punctuation"},'"')]),o("\n    "),t("span",{class:"token punctuation"},"/>")]),o("\n    "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),o("button")]),o(),t("span",{class:"token attr-name"},"@click"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),o("setMaxValue(maxRef)"),t("span",{class:"token punctuation"},'"')]),t("span",{class:"token punctuation"},">")]),o("Set maximum"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("button")]),t("span",{class:"token punctuation"},">")]),o("\n  "),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("div")]),t("span",{class:"token punctuation"},">")]),o("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),o("template")]),t("span",{class:"token punctuation"},">")]),o("\n")])])],-1),T=t("h2",{id:"marble-diagram"},"Marble diagram",-1),j=t("p",null,[t("img",{src:"/stopwatch.png",alt:"stopwatch diagram"})],-1);c.render=function(o,p,c,D,P,W){const $=n("StopwatchDemo"),A=n("ClientOnly");return a(),s("div",null,[u,l,k,t(A,null,{default:e((()=>[t($)])),_:1}),i,r,m,g,d,b,f,v,h,x,y,w,R,S,V,q,N,C,M,T,j])};export default c;export{p as __pageData};
